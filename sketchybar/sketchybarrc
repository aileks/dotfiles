#!/usr/bin/env bash

source "$HOME/.config/sketchybar/colors.sh"

sketchybar --bar position=top \
                 height=32 \
                 margin=0 \
                 y_offset=0 \
                 corner_radius=0 \
                 color=$BAR_COLOR \
                 border_width=0 \
                 blur_radius=0 \
                 padding_left=10 \
                 padding_right=10

sketchybar --default updates=when_shown \
                     icon.font="SF Pro:Semibold:15.0" \
                     icon.color=$ICON_COLOR \
                     icon.padding_left=4 \
                     icon.padding_right=4 \
                     label.font="SF Pro:Semibold:14.0" \
                     label.color=$LABEL_COLOR \
                     label.padding_left=4 \
                     label.padding_right=8 \
                     padding_right=5 \
                     padding_left=5 \
                     background.color=$TRANSPARENT \
                     background.border_width=0 \
                     background.height=24

WORKSPACE_ICONS=("1" "2" "3" "4" "5" "6" "7" "8" "9" "10")

for i in "${!WORKSPACE_ICONS[@]}"; do
  sid=$((i + 1))
  sketchybar --add item space.$sid left \
             --set space.$sid associated_space=$sid \
                              icon="${WORKSPACE_ICONS[i]}" \
                              icon.padding_left=8 \
                              icon.padding_right=8 \
                              icon.color=$WHITE \
                              label.drawing=off \
                              script="$HOME/.config/sketchybar/plugins/aerospace.sh" \
                              click_script="aerospace workspace $sid" \
             --subscribe space.$sid aerospace_workspace_change
done

sketchybar --add event aerospace_workspace_change

sketchybar --add item separator_left left \
           --set separator_left icon="|" \
                               icon.color=$GREY \
                               icon.padding_left=4 \
                               icon.padding_right=4 \
                               label.drawing=off

sketchybar --add item front_app left \
           --set front_app icon.drawing=off \
                          label.color=$GREEN \
                          label.font="SF Pro:Bold:14.0" \
                          script="$HOME/.config/sketchybar/plugins/front_app.sh" \
           --subscribe front_app front_app_switched

sketchybar --add item brew right \
           --set brew icon=󰏓 \
                      icon.color=$YELLOW \
                      label.color=$WHITE \
                      update_freq=1800 \
                      script="$HOME/.config/sketchybar/plugins/brew.sh"

sketchybar --add item volume right \
           --set volume icon=󰕾 \
                        icon.color=$BLUE \
                        label.color=$WHITE \
                        script="$HOME/.config/sketchybar/plugins/volume.sh" \
           --subscribe volume volume_change

sketchybar --add item cpu right \
           --set cpu icon=󰻠 \
                     icon.color=$RED \
                     label.color=$WHITE \
                     update_freq=2 \
                     script="$HOME/.config/sketchybar/plugins/cpu.sh"

sketchybar --add item ram right \
           --set ram icon=󰍛 \
                     icon.color=$MAGENTA \
                     label.color=$WHITE \
                     update_freq=5 \
                     script="$HOME/.config/sketchybar/plugins/ram.sh"

sketchybar --add item clock right \
           --set clock icon=󰅐 \
                       icon.color=$ORANGE \
                       label.color=$WHITE \
                       update_freq=10 \
                       script="$HOME/.config/sketchybar/plugins/clock.sh"

sketchybar --update
