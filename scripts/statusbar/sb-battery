#!/bin/sh

battery_path="/sys/class/power_supply/BAT0"

if [ ! -d "$battery_path" ]; then
    battery_path="/sys/class/power_supply/BAT1"
fi

if [ ! -d "$battery_path" ]; then
    exit 0
fi

capacity=$(cat "$battery_path/capacity" 2>/dev/null)
status=$(cat "$battery_path/status" 2>/dev/null)

if [ -z "$capacity" ]; then
    exit 0
fi

if [ "$status" = "Charging" ]; then
    icon="󰂄"
    color="#D87C4A"
elif [ "$capacity" -le 10 ]; then
    icon="󰂃"
    color="#B14242"
elif [ "$capacity" -le 25 ]; then
    icon="󰁺"
    color="#DF6464"
elif [ "$capacity" -le 50 ]; then
    icon="󰁾"
    color="#E49A44"
elif [ "$capacity" -le 75 ]; then
    icon="󰂀"
    color="#a7a7a7"
else
    icon="󰁹"
    color="#4A8B8B"
fi

printf "^c%s^%s %s%%^d^" "$color" "$icon" "$capacity"
