#!/bin/bash
# Statusbar module: CPU usage
# Left click: open btop
# Right click: show CPU details notification

case $BUTTON in
	1)
		wezterm start --class btop-floating -- btop
		;;
	3)
		cpu=$(top -bn1 | grep "Cpu(s)" | awk '{print int($2 + $4)}')
		notify-send "󰻠 CPU Usage" "Current CPU: $cpu%"
		;;
esac

cpu=$(top -bn1 | grep "Cpu(s)" | awk '{print int($2 + $4)}')

if [ "$cpu" -ge 80 ]; then
	color="#b14242"
elif [ "$cpu" -ge 50 ]; then
	color="#e49a44"
else
	color="#a7a7a7"
fi

printf "^c%s^󰻠 %s%%^d^" "$color" "$cpu"
