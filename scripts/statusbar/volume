#!/bin/bash
# Statusbar module: volume control
# Left click: toggle mute
# Right click: open wiremix

case $BUTTON in
1)
  pamixer -t
  ;;
3)
  wezterm start --class volume-floating -- wiremix
  disown $!
  ;;
esac

vol=$(pamixer --get-volume 2>/dev/null)
muted=$(pamixer --get-mute 2>/dev/null)

if [ "$muted" = "true" ]; then
  icon="󰝟"
  color="#535353"
  printf "^c%s^%s^d^" "$color" "$icon"
  exit 0
elif [ -z "$vol" ]; then
  :
elif [ "$vol" -eq 0 ]; then
  icon="󰕿"
  color="#535353"

elif [ "$vol" -lt 30 ]; then
  icon="󰕿"
  color="#a7a7a7"

elif [ "$vol" -lt 70 ]; then
  icon="󰖀"
  color="#a7a7a7"

else
  icon="󰕾"
  color="#d87c4a"

fi

printf "^c%s^%s %s%%^d^" "$color" "$icon" "$vol"
